schema: '2.0'
stages:
  DownloadData:
    cmd: python src/stage_01_download_data.py --config=configs/config.yaml --params=params.yaml
    deps:
    - path: configs/config.yaml
      md5: 588280486193fafc18407a15d6e6bc06
      size: 2369
    - path: params.yaml
      md5: 63a3f01262e5bfcd05a248a194c7fc68
      size: 282
    - path: src/stage_01_download_data.py
      md5: 10e0696685e2f6e0daf7f164c14ef08c
      size: 2696
    outs:
    - path: data/raw/sensors.csv
      md5: 41cd3ad62670a938d05373078857b52d
      size: 308421
  PreprocessData:
    cmd: python src/stage_02_preprocess_data.py  --config=configs/config.yaml --params=params.yaml
    deps:
    - path: configs/config.yaml
      md5: 588280486193fafc18407a15d6e6bc06
      size: 2369
    - path: data/raw/sensors.csv
      md5: 41cd3ad62670a938d05373078857b52d
      size: 308421
    - path: params.yaml
      md5: 63a3f01262e5bfcd05a248a194c7fc68
      size: 282
    - path: src/stage_02_preprocess_data.py
      md5: 0bdebbf99af12f72d4ce1b881e56142b
      size: 2151
    outs:
    - path: data/preprocessed/test.csv
      md5: 29e1f2a23ede0da3cdc7595dcb049859
      size: 125248
    - path: data/preprocessed/train.csv
      md5: 9981bb4366e6cfe850f8559a95563c15
      size: 301005
  TrainAndEvalute:
    cmd: python src/stage_03_train_evaluate.py  --config=configs/config.yaml --params=params.yaml
    deps:
    - path: configs/config.yaml
      md5: 588280486193fafc18407a15d6e6bc06
      size: 2369
    - path: data/preprocessed/test.csv
      md5: 29e1f2a23ede0da3cdc7595dcb049859
      size: 125248
    - path: data/preprocessed/train.csv
      md5: 9981bb4366e6cfe850f8559a95563c15
      size: 301005
    - path: params.yaml
      md5: 63a3f01262e5bfcd05a248a194c7fc68
      size: 282
    - path: src/stage_03_train_evaluate.py
      md5: 4bcdcaa5b3e45a6644ef592504833dbb
      size: 7192
    outs:
    - path: artifacts/prediction_schema/schema.json
      md5: eeb336c060ddae954012b80b7ce7c2fb
      size: 6274
    - path: artifacts/reports/params.json
      md5: d253e8b7c626f422fe1a8f15bb9a61da
      size: 516
    - path: artifacts/reports/scores.json
      md5: b6100784163a99d8576fb80dd05cbe24
      size: 116
    - path: artifacts/trained_model/model.joblib
      md5: fc51f377fbbeabf65ce492ee4c8907f1
      size: 1192495
  PreProdSetup:
    cmd: "python src/stage_04_preprod_setup.py\npytest tests/test_preblessing.py --junitxml=artifacts/reports/preblessing_tests.xml\n"
    deps:
    - path: artifacts/prediction_schema/schema.json
      md5: eeb336c060ddae954012b80b7ce7c2fb
      size: 6274
    - path: artifacts/trained_model/model.joblib
      md5: fc51f377fbbeabf65ce492ee4c8907f1
      size: 1192495
    - path: configs/config.yaml
      md5: 588280486193fafc18407a15d6e6bc06
      size: 2369
    - path: params.yaml
      md5: 63a3f01262e5bfcd05a248a194c7fc68
      size: 282
    - path: src/stage_04_preprod_setup.py
      md5: a443b09c9ca46d78d8c37f8794837671
      size: 1051
    - path: tests/test_preblessing.py
      md5: d6a147f2c677d648f70c5ddf20f56d6e
      size: 1864
    outs:
    - path: artifacts/reports/preblessing_tests.xml
      md5: 47913c666674182c0ccfe168242be68b
      size: 338
  ModelBlessing:
    cmd: python src/stage_05_model_blessing.py  --config=configs/config.yaml --params=params.yaml
    deps:
    - path: artifacts/reports/preblessing_tests.xml
      md5: 47913c666674182c0ccfe168242be68b
      size: 338
    - path: artifacts/trained_model/model.joblib
      md5: fc51f377fbbeabf65ce492ee4c8907f1
      size: 1192495
    - path: configs/config.yaml
      md5: 588280486193fafc18407a15d6e6bc06
      size: 2369
    - path: data/preprocessed/test.csv
      md5: 29e1f2a23ede0da3cdc7595dcb049859
      size: 125248
    - path: src/stage_05_model_blessing.py
      md5: 4135ade22177d41b25a266bf3e060bca
      size: 3184
    outs:
    - path: artifacts/blessed_model/model.joblib
      md5: fc51f377fbbeabf65ce492ee4c8907f1
      size: 1192495
  Production:
    cmd: python src/stage_06_production_service.py  --config=configs/config.yaml
    deps:
    - path: artifacts/blessed_model/model.joblib
      md5: fc51f377fbbeabf65ce492ee4c8907f1
      size: 1192495
    - path: configs/config.yaml
      md5: 588280486193fafc18407a15d6e6bc06
      size: 2369
    - path: data/preprocessed/test.csv
      md5: 29e1f2a23ede0da3cdc7595dcb049859
      size: 125248
    - path: src/stage_06_production_service.py
      md5: bccf9c41d4a7abbd9964ba5ad7eddfb0
      size: 2433
    outs:
    - path: model_serving/data/predictions.csv
      md5: fd786d03779f1cbf27a56c3162c06dad
      size: 313938
    - path: model_serving/production_model/model.joblib
      md5: fc51f377fbbeabf65ce492ee4c8907f1
      size: 1192495
